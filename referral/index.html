<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Set up a new password for Money Manager 365</title><!-- SOE Main Page --><meta name="keywords" content="money manager,365,expense,spend,budget,wallet,track,finance,tracker,Money Manager 365"><meta name="Description" content="Money Manager 365 - the financial planning, review, expense, track, budget, tracker, and personal asset management app for Android and iOS"><!-- Page --><link rel="canonical" href="http://www.moneymanager365.com/"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Money Manager 365"><meta property="og:description" content="Money Manager 365 - the financial planning, review, expense, track, budget, tracker, and personal asset management app for Android and iOS"><meta property="og:url" content="http://www.moneymanager365.com/"><meta property="article:section" content="Money Manager helps you track your financial activity efficiently. Its simple design makes it lightweight, straightforward and very easy to use. It’s done in one click, because you don’t need to fill anything except the amount"><meta property="article:published_time" content="2018-04-21T03:31:26.000+08:00"><meta property="og:image" content="https://www.moneymanager365.com/assets/img/1.png"><meta property="og:image" content="https://www.moneymanager365.com/assets/img/2.png"><meta property="og:image" content="https://www.moneymanager365.com/assets/img/3.png"><meta property="og:image" content="https://www.moneymanager365.com/assets/img/4.png"><meta property="og:image" content="https://www.moneymanager365.com/assets/img/5.png"><meta property="og:image" content="https://www.moneymanager365.com/assets/img/6.png"><meta property="og:image" content="https://www.moneymanager365.com/assets/img/7.png"><meta property="og:image" content="https://www.moneymanager365.com/assets/img/8.png"><meta property="og:image" content="https://www.moneymanager365.com/assets/img/9.png"><meta property="og:image" content="https://www.moneymanager365.com/assets/img/10.png"><meta property="og:image" content="https://www.moneymanager365.com/assets/img/11.png"><meta property="og:image" content="https://www.moneymanager365.com/assets/img/12.png"><style type="text/css" rel="stylesheet" media="all">:not(br):not(tr):not(html){font-family:Arial,'Helvetica Neue',Helvetica,sans-serif;box-sizing:border-box}body{width:100%!important;height:100%;margin:0;line-height:1.4;background-color:#f2f4f6;color:#74787e;-webkit-text-size-adjust:none}blockquote,ol,p,ul{line-height:1.4;text-align:left}a{color:#3869d4}a img{border:none}.email-wrapper{width:100%;margin:0;padding:0;-premailer-width:100%;-premailer-cellpadding:0;-premailer-cellspacing:0;background-color:#f2f4f6}.email-content{width:100%;margin:0;padding:0;-premailer-width:100%;-premailer-cellpadding:0;-premailer-cellspacing:0}.email-masthead{padding:25px 0;text-align:center}.email-masthead_logo{width:94px}.email-masthead_name{font-size:16px;font-weight:700;color:#bbbfc3;text-decoration:none;text-shadow:0 1px 0 #fff}.title_name{font-size:16px;font-weight:700;color:#555;text-decoration:none;text-shadow:0 1px 0 #fff}.email-body{width:100%;margin:0;padding:0;-premailer-width:100%;-premailer-cellpadding:0;-premailer-cellspacing:0;border-top:1px solid #edeff2;border-bottom:1px solid #edeff2;background-color:#fff}.email-body_inner{width:570px;margin:0 auto;padding:0;-premailer-width:570px;-premailer-cellpadding:0;-premailer-cellspacing:0;background-color:#fff}.email-footer{width:570px;margin:0 auto;padding:0;-premailer-width:570px;-premailer-cellpadding:0;-premailer-cellspacing:0;text-align:center}.email-footer p{color:#aeaeae}.body-action{width:100%;margin:1px auto;padding:0;-premailer-width:100%;-premailer-cellpadding:0;-premailer-cellspacing:0;text-align:center}.body-sub{margin-top:25px;padding-top:25px;border-top:1px solid #edeff2}.content-cell{padding:35px}.preheader{display:none!important}.attributes{margin:0 0 21px}.attributes_content{background-color:#edeff2;padding:16px}.attributes_item{padding:0}.related{width:100%;margin:0;padding:25px 0 0 0;-premailer-width:100%;-premailer-cellpadding:0;-premailer-cellspacing:0}.related_item{padding:10px 0;color:#74787e;font-size:15px;line-height:18px}.related_item-title{display:block;margin:.5em 0 0}.related_item-thumb{display:block;padding-bottom:10px}.related_heading{border-top:1px solid #edeff2;text-align:center;padding:25px 0 10px}.discount{width:100%;margin:0;padding:24px;-premailer-width:100%;-premailer-cellpadding:0;-premailer-cellspacing:0;background-color:#edeff2;border:2px dashed #9ba2ab}.discount_heading{text-align:center}.discount_body{text-align:center;font-size:15px}.social{width:auto}.social td{padding:0;width:auto}.social_icon{height:20px;margin:0 8px 10px 8px;padding:0}.purchase{width:100%;margin:0;padding:35px 0;-premailer-width:100%;-premailer-cellpadding:0;-premailer-cellspacing:0}.purchase_content{width:100%;margin:0;padding:25px 0 0 0;-premailer-width:100%;-premailer-cellpadding:0;-premailer-cellspacing:0}.purchase_item{padding:10px 0;color:#74787e;font-size:15px;line-height:18px}.purchase_heading{padding-bottom:8px;border-bottom:1px solid #edeff2}.purchase_heading p{margin:0;color:#9ba2ab;font-size:12px}.purchase_footer{padding-top:15px;border-top:1px solid #edeff2}.purchase_total{margin:0;text-align:right;font-weight:700;color:#2f3133}.purchase_total--label{padding:0 15px 0 0}.align-right{text-align:right}.align-left{text-align:left}.align-center{text-align:center}@media only screen and (max-width:600px){.email-body_inner,.email-footer{width:100%!important}}@media only screen and (max-width:500px){.button{width:100%!important}}.button{background-color:#3869d4;border-top:10px solid #3869d4;border-right:18px solid #3869d4;border-bottom:10px solid #3869d4;border-left:18px solid #3869d4;display:inline-block;color:#fff;text-decoration:none;border-radius:3px;box-shadow:0 2px 3px rgba(0,0,0,.16);-webkit-text-size-adjust:none}.button--green{background-color:#22bc66;border-top:10px solid #22bc66;border-right:18px solid #22bc66;border-bottom:10px solid #22bc66;border-left:18px solid #22bc66}.button--red{background-color:#ff6136;border-top:10px solid #ff6136;border-right:18px solid #ff6136;border-bottom:10px solid #ff6136;border-left:18px solid #ff6136}h1{margin-top:0;color:#2f3133;font-size:19px;font-weight:700;text-align:left}h2{margin-top:0;color:#2f3133;font-size:16px;font-weight:700;text-align:left}h3{margin-top:0;color:#2f3133;font-size:14px;font-weight:700;text-align:left}p{margin-top:0;color:#74787e;font-size:16px;line-height:1.5em;text-align:left}p.sub{font-size:12px}p.center{text-align:center}.mytitle{width:100%;text-align:center}.facebook_post{width:100%;text-align:center}a.facebook_button{text-decoration:none}.my-share-buttons{text-align:center;max-height:100px;height:40px}.my-button{background-color:#4caf50;border:none;color:#fff;padding:10px 20px;text-decoration:none;display:inline-block;font-size:16px;margin:4px 2px;-webkit-transition-duration:.4s;transition-duration:.4s;cursor:pointer;border-radius:5px}.buttonFacebook{width:150px;background-color:#00000000;color:#000;border:1px solid #008cba}.buttonFacebook:hover{background-color:#0ba3d6;color:#fff}.buttonLogout{width:80px;padding:5px;background-color:#00000000;color:#000;border:1px solid #008cba}.buttonLogout:hover{background-color:#0ba3d6;color:#fff}input,select{text-align:center;width:200px;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;margin-bottom:30px}input[type=submit]:hover{background-color:#45a049}.myForm{width:200px;text-align:center}.container{width:100%;text-align:center}.myBorder{border:1px solid #dddfd2;padding:12px;width:320px;font-size:12px}.subTitle{font-size:1em;color:#222}.registrationLink{cursor:pointer;color:#3869d4}</style><link rel="icon" href="../assets/img/icon.png"></head><body><span class="preheader">Use this link to reset your password. The link is only valid for 24 hours.</span><table class="email-wrapper" height="100%" width="100%" cellpadding="0" cellspacing="0"><tr><td align="center"><span id="formView"></span></td></tr><tr><td><table class="email-footer" align="center" width="570" cellpadding="0" cellspacing="0"><tr><td class="content-cell" align="center"><p class="sub align-center">&copy; 2020 Money Manager 365. All rights reserved.</p><!--                      
                              <p class="sub align-center">
                                  [Company Name, LLC]
                                  <br>1234 Street Rd.
                                  <br>Suite 1234
                              </p>
                            --></td></tr></table></td></tr></table><script>const serverUrl = "http://api.moneymanager365.com:6868";
        //const serverUrl = "http://127.0.0.1:6868";
        const apiKey = "4F72109D-1B16-460F-B0B9-62AB9D1DB9DE";
        var loginString = `
            <table class="email-content" width="100%" cellpadding="0" cellspacing="0">
                            <tr>
                            
                                <td class="email-masthead">
                                    <a href="http://www.moneymanager365.com" class="title_name">
                                        <img src="../assets/img/icon.png" width="16">
                                        Money Manager 365 - Login
                                    </a>
                                    
                                </td>
                            </tr>
                            <tr>
                                <td class="email-body" align="center">
                                    
                                    <h4>
                                    Get Unlimited VIP for free by inviting your friends to our website : Money Manager 365 
                                    </h4>
                                 
                                    <h5>
                                    For every friend who joins, we will give both of you 3 months VIP( You can accumulate the VIP end Date)
                                    <br />
                                    
                                    
                                </td>
                            </tr>
                            <!-- Email Body -->
                            <tr>
                                <td class="email-body" width="100%" cellpadding="0" cellspacing="0" align="center">
        
        
                                    <table class="email-body-inner" align="center" width="100%">
                                        <tr>
                                            <td class="content-cell">
        
                                                <div class="container">
        
                                                    <div>
                                                        <label for="fname">Email</label><br />
                                                        <input type="text" class="" id="loginEmail" 
                                                            autofocus>
                                                    </div>
                                                    <div>
                                                        <label for="lname">Password</label><br />
                                                        <input type="password" id="loginPassword" name="lastname">
        
                                                    </div>
        
                                                    <div class="my-share-buttons">
                                                        <label id="lblErrorMessage"></label>
                                                        <div id="loadingActivity" class="loader"></div>
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <button onclick="onLoginClicked()" class="buttonFacebook my-button">
                                                            Login
                                                        </button>
                                                    
                                                    </div>
                                                    <div>
                                                        <br /><br /><br /><br />
                                                        <br />
                                                        <span onclick="onRegistrationClicked()" class="registrationLink"  >Registration</span>
                                                    </div>
                                                    <div>
                                                        <br /><br /><br /><br /><br /><br />
                                                    </div>
        
                                                </div>
        
        
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    
                                </td>
                            </tr>
                        </table>
            `;
        var userViewString = `
            <table class="email-content" width="100%" cellpadding="0" cellspacing="0">
                            <tr>
                                <td class="email-masthead">
                                    <img src="../assets/img/icon.png" width="16">
                                    <a href="http://www.moneymanager365.com" class="title_name">
                                        Money Manager 365 - Invite Your Friend
                                    </a>
                                    <button onclick="onLogoutClicked()" class="buttonLogout my-button">Logout</button>  
                                
                                </td>
                                
                            </tr>
                            
                            <!-- Email Body -->
                            <tr>
                                <td class="email-body" width="100%" cellpadding="0" cellspacing="0" align="center">
        
        
                                    <table class="email-body-inner" align="center" width="100%">
                                        <tr>
                                            <td class="content-cell">
        
                                                <div class="container">
        
                                                    <div>
                                                        <label for="fname">Your VIP Expiry Date : <span id="userExpiryDate"></span></label><br />
                                                        <label for="fname">Your Referral Code : <span id="userReferralCode"></span></label><br />
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <label for="fname"> 
                                                            <span class="subTitle">Copy and send the referral link to your friend.</span>
                                                            <br />
                                                            <button onclick="onCopyLinkClicked()" width="80" class=" my-button">
                                                            Copy Link
                                                            </button>
                                                        <input type="text" class="myBorder" value="" id="shareReferralLink"  >
                                                            <br />
                                                            <span id="copyAlert"></span>
                                                        </label>
                                                        
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <br />
    
                                                        
                                                    </div>
                                                    <div>
                                                        <label for="lname">Submit Your Friend Referral Code</label><br />
                                                        <input type="text" id="friendReferralCode" name="lastname">
        
                                                    </div>
        
                                                    <div class="my-share-buttons">
                                                        <label id="lblErrorMessage">&nbsp;</label>
                                                        <br /><br />
                                                        <button onclick="onButtonSubmitCLicked()" class="buttonFacebook my-button">
                                                            Submit
                                                        </button>
                                                    
                                                    </div>
                                                    <div>
                                                        <br /><br /><br /><br />
                                                    </div>
                                                    <div>
                                                        <br /><br /><br /><br />
                                                    </div>
        
                                                </div>
        
        
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    
                                </td>
                            </tr>
                        </table>
            `;
        var registrationString = `
            <table class="email-content" width="100%" cellpadding="0" cellspacing="0">
                            <tr>
                                <td class="email-masthead">
                                    <img src="../assets/img/icon.png" width="16">
                                    <a href="http://www.moneymanager365.com" class="title_name">
                                        Money Manager 365 - Registration
                                    </a>
                                </td>
                            </tr>
                            <!-- Email Body -->
                            <tr>
                                <td class="email-body" width="100%" cellpadding="0" cellspacing="0" align="center">
        
        
                                    <table class="email-body-inner" align="center" width="100%">
                                        <tr>
                                            <td class="content-cell">
        
                                                <div class="container">
        
                                                    <div>
                                                        <label for="fname">Email</label><br />
                                                        <input type="text" class="" id="email" name="firstname"
                                                            autofocus>
                                                    </div>
                                                    <div>
                                                        <label for="lname">Password</label>
                                                        
                                                        <br />
                                                        <input type="password"  class="passwordWidth"  id="password" name="lastname">
                                                    
                                                    </div>
    
                                                    <div>
                                                        <label for="lname">Password Confirm</label>
                                                        
                                                        <br />
                                                        <input type="password"  class="passwordWidth"  id="passwordConfirm" name="lastname">
                                                    
                                                    </div>
                                                    
                                                    <div class="my-share-buttons">
                                                        <label id="lblErrorMessage"></label>
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <button onclick="onCancelClicked()" class="buttonFacebook my-button">
                                                            Cancel
                                                        </button>&nbsp;&nbsp;&nbsp;
                                                        <button onclick="register()" class="buttonFacebook my-button">
                                                            Register
                                                        </button>
                                                    
                                                    </div>
                                                    <div>
                                                        <br /><br /><br /><br />
                                                    </div>
                                                    <div>
                                                        <br /><br /><br /><br /><br /><br />
                                                    </div>
        
                                                </div>
        
        
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    
                                </td>
                            </tr>
                        </table>
            `;

        var urlParam = getUrlParams();
        var friendReferralCodeFromUrl = urlParam["referralCode"];
        if (friendReferralCodeFromUrl == undefined) {
            friendReferralCodeFromUrl = "";
        }
        if (friendReferralCodeFromUrl == null) {
            friendReferralCodeFromUrl = "";
        }

        initView();

        function getUrlParams() {
            var vars = {};
            var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {
                vars[key] = value;
            });
            return vars;
        }

        function initView() {
            let token = localStorage.getItem("token");
            if (token == null) {
                token = "";
            }




            if (token == "") {
                console.log("Show Login Page");
                initLoginView();
            } else {
                console.log("Show User Page");
                initUserView();
                getExpiryDate(token);
            }



        }

        function initLoginView() {
            let formViewElement = document.getElementById("formView");
            formViewElement.innerHTML = loginString;

            let emailElement = document.getElementById("loginEmail");
            let email = localStorage.getItem("email");
            if (email == null || email == "null") {
                email = "";
                localStorage.setItem("email", email);
            }

            emailElement.value = email;
        }

        function onLoginClicked() {

            let email = document.getElementById("loginEmail").value;
            let password = document.getElementById("loginPassword").value;

            let lblErrorMessage = document.getElementById("lblErrorMessage");

            if (email == "") {
                lblErrorMessage.innerHTML = "The email can not be empty";
                return;
            }

            if (password == "") {
                lblErrorMessage.innerHTML = "The password can not be empty";
                return;
            }

            lblErrorMessage.innerHTML = "logging in...";

            const xmlHttp = new XMLHttpRequest();
            let sendData = {
                "email": email,
                "password": password
            };

            xmlHttp.onreadystatechange = function () {
                if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
                    let responseText = xmlHttp.responseText;
                    console.log("responseText=" + responseText);
                    if (responseText == "") {
                        lblErrorMessage.innerHTML = "Email or Password not correct";
                        return;
                    }

                    let response = JSON.parse(responseText);
                    localStorage.setItem("token", response.token);
                    localStorage.setItem("email", response.email);
                    localStorage.setItem("loginTime", (new Date()).getTime());
                    localStorage.setItem("userInfo", responseText);

                    initView();

                } else if (xmlHttp.readyState == 4 && xmlHttp.status != 200) {
                    console.log("failure : " + xmlHttp.responseText);
                    lblErrorMessage.innerHTML = "Connection failed, please try later."
                }

            };
            xmlHttp.open("POST", serverUrl + "/web/login", true);
            xmlHttp.setRequestHeader("Content-Type", "application/json");
            xmlHttp.setRequestHeader('api_key', apiKey);
            xmlHttp.send(JSON.stringify(sendData));

            console.log(apiKey);
            console.log(sendData);
        }

        function onLogoutClicked() {
            let email = localStorage.getItem("email");
            localStorage.clear();
            localStorage.setItem("email", email);
            initView();
        }

        function initUserView() {

            let formViewElement = document.getElementById("formView");
            formViewElement.innerHTML = userViewString;

            let userInfoString = localStorage.getItem("userInfo");
            let userInfo = JSON.parse(userInfoString);

            if (userInfo == null) {
                return;
            }

            let userReferralCodeElement = document.getElementById("userReferralCode");
            userReferralCodeElement.innerHTML = userInfo.referralCode;

            let userExpiryDateElement = document.getElementById("userExpiryDate");
            let expiryDateValue = userInfo.vipExpiryDate;
            if (expiryDateValue < 1580807758800) {
                userExpiryDateElement.innerHTML = "-";
            } else {
                let expiryDate = new Date(userInfo.vipExpiryDate);
                let dateText = expiryDate.getFullYear() + " " + getMonth(expiryDate.getMonth()) + " " + expiryDate.getUTCDate();
                userExpiryDateElement.innerHTML = dateText;
            }

            let shareReferralLinkElement = document.getElementById("shareReferralLink");
            let shareReferralLink = window.location.origin + "/referral/?referralCode=" + userInfo.referralCode;
            shareReferralLinkElement.value = shareReferralLink;


            let friendReferralCodeElement = document.getElementById("friendReferralCode");
            friendReferralCodeElement.value = friendReferralCodeFromUrl;


        }

        function getMonth(month) {
            switch (month) {
                case 0: return "Jan";
                case 1: return "Feb";
                case 2: return "Mar";
                case 3: return "Apr";
                case 4: return "May";
                case 5: return "Jun";
                case 6: return "Jul";
                case 7: return "Aug";
                case 8: return "Sep";
                case 9: return "Oct";
                case 10: return "Nov";
                case 11: return "Dec";
                default:
                    break;
            }
        }

        function onCopyLinkClicked() {

            var shareReferralLinkElement = document.getElementById("shareReferralLink");

            /* Select the text field */
            shareReferralLinkElement.select();
            shareReferralLinkElement.setSelectionRange(0, 99999); /*For mobile devices*/

            /* Copy the text inside the text field */
            document.execCommand("copy");

            /* Alert the copied text */
            let copyAlertElement = document.getElementById("copyAlert");
            copyAlert.innerHTML = "Copied";

            setTimeout(() => {
                copyAlert.innerHTML = "";
            }, 2000);
        }

        function onButtonSubmitCLicked() {

            let friendReferralCodeElement = document.getElementById("friendReferralCode");
            let lblErrorMessageElement = document.getElementById("lblErrorMessage");

            let friendReferralCode = friendReferralCodeElement.value;
            lblErrorMessageElement.innerHTML = "Submitting...";



            let sendData = {
                "token": localStorage.getItem("token"),
                "friendReferralCode": friendReferralCode
            };


            const xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function () {
                if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
                    console.log("Success : " + xmlHttp.responseText);
                    onSumitSuccess(xmlHttp.responseText);
                } else if (xmlHttp.readyState == 4 && xmlHttp.status != 200) {
                    console.log("failure : " + xmlHttp.responseText);
                    let lblErrorMessageElement = document.getElementById("lblErrorMessage");
                    lblErrorMessageElement.innerHTML = "Connection failed, please try later"
                }
            };
            xmlHttp.open("POST", serverUrl + "/web/register-referral-code", true);
            xmlHttp.setRequestHeader("Content-Type", "application/json");
            xmlHttp.setRequestHeader('api_key', apiKey);
            xmlHttp.send(JSON.stringify(sendData));
        }

        function onSumitSuccess(status) {
            let lblErrorMessageElement = document.getElementById("lblErrorMessage");

            if (status == "0") {
                lblErrorMessageElement.innerHTML = "Connection failed, please try later"
            } else if (status == "-1") {
                lblErrorMessageElement.innerHTML = "Can not submit your own Referral Code.";
            } else if (status == "-2") {
                lblErrorMessageElement.innerHTML = "The Referral Code is not exist";
            } else if (status == "-3") {
                lblErrorMessageElement.innerHTML = "The Referral Code has been submitted before.";
            } else if (status == "1") {
                lblErrorMessageElement.innerHTML = "Submit Successfully! We've sent a VIP Activation Link to your mailbox, please check your mailbox after a moment";
            }

        }

        function onRegistrationClicked() {
            let formViewElement = document.getElementById("formView");
            formViewElement.innerHTML = registrationString;
        }

        function onCancelClicked() {
            initLoginView();
        }

        function register() {
            let emailElement = document.getElementById("email");
            let passwordElement = document.getElementById("password");
            let passwordConfirmElement = document.getElementById("passwordConfirm");
            let lblErrorMessageElement = document.getElementById("lblErrorMessage");


            let email = emailElement.value;
            let password = passwordElement.value;
            let passwordConfirm = passwordConfirmElement.value;

            if (email == "") {
                lblErrorMessageElement.innerHTML = "The email can not be empty";
                return;
            }

            if (password == "") {
                lblErrorMessageElement.innerHTML = "The password can not be empty";
                return;
            }

            if (password != passwordConfirm) {
                lblErrorMessageElement.innerHTML = "The password must be the same.";
                return;
            }

            lblErrorMessageElement.innerHTML = "Registring...";

            let sendData = {
                "deviceId": "",
                "user": {
                    "userId": "",
                    "email": email,
                    "password": password,
                    "token": "",
                    "vip": 0,
                    "coin": 0,
                    "activationCode": "",
                    "vipExpiryDate": 1584512880000,
                    "vipType": "NONE",
                    "exportFormat": "dd/MM/yy",
                    "isDefaultFormat": true,
                    "referralCode": ""
                },
                "platform": "WEB",
                "deviceToken": ""
            };

            const xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function () {
                if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
                    console.log("Success : " + xmlHttp.responseText);
                    onRegisterSuccess(email, xmlHttp.responseText);
                } else if (xmlHttp.readyState == 4 && xmlHttp.status != 200) {
                    console.log("failure : " + xmlHttp.responseText);
                    let lblErrorMessageElement = document.getElementById("lblErrorMessage");
                    lblErrorMessageElement.innerHTML = "Connection failed, please try later"
                }
            };
            xmlHttp.open("POST", serverUrl + "/web/register-user", true);
            xmlHttp.setRequestHeader("Content-Type", "application/json");
            xmlHttp.setRequestHeader('api_key', apiKey);
            xmlHttp.send(JSON.stringify(sendData));


        }

        function onRegisterSuccess(email, responseText) {

            let lblErrorMessageElement = document.getElementById("lblErrorMessage");
            let response = JSON.parse(responseText);
            let status = response.status;

            if (status == -1) {
                lblErrorMessageElement.innerHTML = "The email address has been taken!"
                return;
            }

            localStorage.setItem("token", response.token);
            localStorage.setItem("email", email);
            localStorage.setItem("loginTime", (new Date()).getTime());
            localStorage.setItem("userInfo", responseText);

            initView();

        }

        function getExpiryDate(token) {
            const xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function () {
                if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
                    console.log("Success : " + xmlHttp.responseText);
                    let userExpiryDateElement = document.getElementById("userExpiryDate");

                    let expiryDateValue = Number(xmlHttp.responseText);
                    let expiryDate = new Date(expiryDateValue);
                    let dateText = expiryDate.getFullYear() + " " + getMonth(expiryDate.getMonth()) + " " + expiryDate.getUTCDate();
                    userExpiryDateElement.innerHTML = dateText;

                    let userInfoText = localStorage.getItem("userInfo");
                    let userInfo = JSON.parse(userInfoText);
                    userInfo.vipExpiryDate = expiryDateValue;
                    localStorage.setItem("userInfo", JSON.stringify(userInfo));

                } else if (xmlHttp.readyState == 4 && xmlHttp.status != 200) {
                    console.log("failure : " + xmlHttp.responseText);

                }
            };
            xmlHttp.open("POST", serverUrl + "/web/get-expiry-date", true);
            xmlHttp.setRequestHeader("Content-Type", "application/json");
            xmlHttp.setRequestHeader('api_key', apiKey);
            xmlHttp.send(token);
        }</script></body></html>